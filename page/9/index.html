<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="This way up" type="application/atom+xml">






<meta name="description" content="be better">
<meta property="og:type" content="website">
<meta property="og:title" content="This way up">
<meta property="og:url" content="http://www.jcsama.com/page/9/index.html">
<meta property="og:site_name" content="This way up">
<meta property="og:description" content="be better">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="This way up">
<meta name="twitter:description" content="be better">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.jcsama.com/page/9/">





  <title>This way up</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">This way up</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">I am not perfect but I keep trying</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.jcsama.com/2014/12/28/js/js-ajax/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jceee">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="This way up">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/12/28/js/js-ajax/" itemprop="url">Ajax中的2个需要注意的地方</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-12-28T16:49:00+08:00">
                2014-12-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Ajax在WEB程序中调用api的利器，这儿记录下在使用过程中发现2个容易忽略而导致错误的地方，这两个地方也是一些javascript的基础知识，也可以当作重温一下javascript的基础</p>
</blockquote>
<h2 id="u5F02_u6B65_u83B7_u53D6_u6570_u636E"><a href="#u5F02_u6B65_u83B7_u53D6_u6570_u636E" class="headerlink" title="异步获取数据"></a>异步获取数据</h2><p>异步是指，在ajax发送请求后，会继续执行下面的方法，直到请求返回时，再回过头来执行ajax中的回调方法。这也是ajax异步的强大之处，不会因为请求而影响程序其他任务的执行时间。但如果你下面执行的代码中，有需要请求返回的数据，那就会发生错误了，因为请求还没回来，你的代码就执行了。如下:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> $.ajax(&#123;</span><br><span class="line">  </span><br><span class="line">     url:<span class="string">'/test/test.api'</span>,</span><br><span class="line">     dataType:<span class="string">'json'</span>,</span><br><span class="line">     type:<span class="string">'get'</span>,</span><br><span class="line">      </span><br><span class="line">     success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line"><span class="comment">//控制台结果：</span></span><br><span class="line"><span class="comment">//2</span></span><br><span class="line"><span class="comment">//1</span></span><br></pre></td></tr></table></figure>
<p>你会发现，控制台先出现的数字是2,之后才是1。如果后面有需要用到请求返回数据的代码，必须写在回调方法success的function里面。</p>
<h2 id="ajax_u4E2D_u7684this_u4F5C_u7528_u57DF"><a href="#ajax_u4E2D_u7684this_u4F5C_u7528_u57DF" class="headerlink" title="ajax中的this作用域"></a>ajax中的this作用域</h2><p>在一个对象中，this变量代表的是自身这个对象，而在ajax中，参数就是一个对象，参数中this变量所代表的是参数本身，如下：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> testObj = &#123;</span><br><span class="line">   <span class="class"><span class="keyword">type</span> </span>: <span class="symbol">'this</span> is testObj<span class="class">.<span class="keyword">type</span>',</span></span><br><span class="line"><span class="class">   <span class="title">test</span> </span>: function()&#123;</span><br><span class="line">        console.log(<span class="symbol">'this</span><span class="class">.<span class="keyword">type</span></span>:' + <span class="keyword">this</span><span class="class">.<span class="keyword">type</span>)</span>;</span><br><span class="line">        <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">           </span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            url:'/test/test.php',</span><br><span class="line">            dataType:<span class="symbol">'jso</span>n',</span><br><span class="line">            <span class="class"><span class="keyword">type</span></span>:<span class="symbol">'ge</span>t',</span><br><span class="line">            success:function(data)&#123;</span><br><span class="line">                console.log(<span class="symbol">'this</span><span class="class">.<span class="keyword">type</span> <span class="title">in</span> <span class="title">ajax</span></span>:' + <span class="keyword">this</span><span class="class">.<span class="keyword">type</span>)</span>;</span><br><span class="line">                console.log(<span class="symbol">'_this</span><span class="class">.<span class="keyword">type</span></span>:' + _this<span class="class">.<span class="keyword">type</span>)</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">testObj.test();</span><br><span class="line"><span class="comment">//控制台出现的数据是：</span></span><br><span class="line"><span class="comment">//this.type:this is testObj.type </span></span><br><span class="line"><span class="comment">//this.type in ajax:get </span></span><br><span class="line"><span class="comment">//_this.type:this is testObj.type</span></span><br></pre></td></tr></table></figure>
<p>要在ajax中使用this指向ajax以外的对象，需要先在ajax外面将this赋值给别的变量，再调用。如上面的_this</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.jcsama.com/2014/11/29/php/php-intMaxVal/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jceee">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="This way up">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/11/29/php/php-intMaxVal/" itemprop="url">int值边界值</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-11-29T18:24:00+08:00">
                2014-11-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/php/" itemprop="url" rel="index">
                    <span itemprop="name">php</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在代码中我将接收的手机号码用intval()转成整形，发现返回的整形数据都变成一个值：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">var_dump(intval(<span class="string">'13800138000'</span>));<span class="comment">//  int 2147483647</span></span><br></pre></td></tr></table></figure>
<p>之前从来没发生过这种事情，为何intval调皮了，于是查了一下intval()，发现这个值是32位系统中int的边界值。</p>
<ul>
<li><p>在32位的系统环境下，intval边界值是-2147483648到2147483647(2^32)；</p>
</li>
<li><p>在64位的系统环境下，intval边界值是-9223372036854775808到9223372036854775807(2^64)；</p>
</li>
</ul>
<p>仔细地回想了一下，之前一直在64位系统下开发，11位的手机号码并不超过其边界值，所以没注意过这个问题，而现在用着的是32位系统，本地一玩就出问题了，涨姿势。</p>
<p>考虑了一下，发现一般的数字数据如状态值，错误码之类的不超过2147483647的数据用intval()还是不错的，若是长一些的数字如qq号码，手机号码等还是得用其他方法获取好些，正则式取数值：       </p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNum</span><span class="params">($str, $default = <span class="number">0</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> preg_match(<span class="string">'/[\d]+/'</span>, $str, $int) ? $int[<span class="number">0</span>]: $default;</span><br><span class="line">&#125;</span><br><span class="line">$str = <span class="string">'13800138000'</span>;</span><br><span class="line">var_dump(getNum($str)); <span class="comment">//string '13800138000' (length=11)</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.jcsama.com/2014/11/09/regEx/regex/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jceee">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="This way up">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/11/09/regEx/regex/" itemprop="url">正则表达式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-11-09T22:57:00+08:00">
                2014-11-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/regEx/" itemprop="url" rel="index">
                    <span itemprop="name">regEx</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>正则表达式 是一种用来描述一定数量文本的模式，通过定义好的正则语句能匹配到目标文本集中所想要的文本。</p>
</blockquote>
<p>要在文本”phone number is 131-1111-1111”  中取到电话号码，首先分析电话的格式:第1个数字为1，第2个数字为3,5,8之中的一个,后面再加上9个数字组成。这些规则就可以来写正则表达式了: <code>#1[385]\d-[\d]{4}-[\d]{4}#</code>    ##的中间就是正则表达式。[]中是字符集\d，表示的是任意数字，而{4}则代表匹配前面的字符几次。下面系统地整理下正则表达式的使用方法：   </p>
<h2 id="u5B57_u7B26_u96C6"><a href="#u5B57_u7B26_u96C6" class="headerlink" title="字符集"></a>字符集</h2><h3 id="5B_5D"><a href="#5B_5D" class="headerlink" title="[]"></a>[]</h3><p><code>[]</code>字符集：中括号中的是想匹配的字符的集合.</p>
<p>如：<code>[abc]</code>的作用相当于匹配a字符或b字符或c字符，与<code>a|b|c</code>作用相同，顺便一说，<code>|</code>的意义是或。</p>
<ul>
<li><p><code>[]</code>的后面也可以加上<code>{time}</code>，来表示对这字符集匹配time次。  </p>
</li>
<li><p><code>[]</code>中若字符的类型相同，顺序连贯，也可以用’-‘符号将首尾连起来。如<code>[a-z][a-h][A-Z][0-9]</code>代表匹配第一个字符在a到z的26个字母中，第二个字符在a到h的8个字母中，第三个字符是0到9的10个数字中。</p>
</li>
</ul>
<h3 id="5B_5E_5D"><a href="#5B_5E_5D" class="headerlink" title="[^]"></a>[^]</h3><p><code>[^]</code> 取反字符集：匹配所有不在括号中出现的字符。</p>
<p>如<code>[^a]</code>匹配所有非a字符。用法可以参考字符集<code>[]</code>的用法，只是效果是取反的。</p>
<h3 id="5E"><a href="#5E" class="headerlink" title="^"></a><code>^</code></h3><p><code>^</code>代表从文本的开始处匹配    如：<code>^abc</code>    匹配以abc为开始的文本</p>
<h3 id="24"><a href="#24" class="headerlink" title="$"></a><code>$</code></h3><p><code>$</code>代表从文本的结束处匹配如：<code>abc$</code>匹配以abc为结束的文本</p>
<h2 id="u7B80_u5316_u5B57_u7B26_u96C6"><a href="#u7B80_u5316_u5B57_u7B26_u96C6" class="headerlink" title="简化字符集"></a>简化字符集</h2><p>字符集可以按规律划分为以下几类，使用简化字符集可以提高写正则的效率。</p>
<ul>
<li><code>\d</code> : 数字字符集，匹配数字 = <code>[0-9]</code></li>
<li><code>\s</code> : 任意的空白符 = <code>[ ]</code></li>
<li><code>\w</code> : 数字或子母或下划线 = <code>[0-9a-zA-Z_]</code></li>
<li><code>.</code>  : 除换行符以外的任意字符 = <code>[^\n\r]</code></li>
<li><code>\b</code> : 匹配单词的开始或结束,<code>\babc\b</code> 匹配文本’this is  abc’中的单词abc</li>
<li><code>\D</code> : 任意非数字字符 = <code>[^0-9]</code></li>
<li><code>\S</code> : 任意非空白字符 = <code>[^ ]</code></li>
<li><code>\W</code> : 任意不是字母数字或下划线的字符</li>
<li><code>\B</code> : 任意不是单词的开头或结尾</li>
</ul>
<h2 id="u5339_u914D_u6B21_u6570"><a href="#u5339_u914D_u6B21_u6570" class="headerlink" title="匹配次数"></a>匹配次数</h2><ul>
<li><p><code>+</code>    一次或多次。     如 <code>a+</code> 可以匹配a, aa, aaa, aaaa….</p>
</li>
<li><p><code>*</code>    0次或多次。 </p>
</li>
<li><p><code>?</code>    0次或一次。</p>
</li>
<li><p><code>{n}</code>   n次</p>
</li>
<li><p><code>{n,}</code>  n次或n次以上</p>
</li>
<li><p><code>{n,m}</code> n到m次</p>
</li>
</ul>
<h2 id="u61D2_u60F0_u9650_u5236_u7B26"><a href="#u61D2_u60F0_u9650_u5236_u7B26" class="headerlink" title="懒惰限制符"></a>懒惰限制符</h2><ul>
<li><p><code>*?</code>    重复任意次，但尽量少次。   相当于*的最少匹配次数  相当于’/a+?/‘ 匹配’aaaa’时会匹配出a</p>
</li>
<li><p><code>+?</code>    重复一至多次，尽量少次。   相当于+的最少匹配次数</p>
</li>
<li><p><code>??</code>    重复0次到1次，尽量少次。</p>
</li>
<li><p><code>{n,}?</code>  重复n次或n次以上，尽量少次。</p>
</li>
<li><p><code>{n,m}?</code> 重复n到m次，尽量少次。</p>
</li>
</ul>
<h2 id="u7EC4_u4E0E_u5411_u540E_u5F15_u7528"><a href="#u7EC4_u4E0E_u5411_u540E_u5F15_u7528" class="headerlink" title="组与向后引用"></a>组与向后引用</h2><p>正则表达式中用()括起来的部分所匹配到的文本会分到单独的组中，若没名字则默认从1开始递增的值为组名，有设置名字的组则以名字为组名（如2所述），而且还能以组名代表式子向后引用：</p>
<h3 id="u666E_u901A_u6355_u83B7_uFF1A"><a href="#u666E_u901A_u6355_u83B7_uFF1A" class="headerlink" title="普通捕获："></a>普通捕获：</h3><figure class="highlight 1c"><table><tr><td class="code"><pre><span class="line">(<span class="built_in">exp</span>)\<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>exp表示的是表达式，\1代表的是在xp式子匹配到的文本。</p>
<p>example：</p>
<figure class="highlight lsl"><table><tr><td class="code"><pre><span class="line">([\w]&#123;<span class="number">3</span>&#125;).*\<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>表示是匹配到3个数字或字符或下划线组成的文本，存入组1中，中间匹配任意字符任意次数，后面再匹配组1中的文本，能匹配到的格式是： ‘abcdefabc’,’d_1d_1’，组1存的是’abc’,’d_1’,而后面组1又出现了，所以整个文本匹配成功。</p>
<h3 id="u547D_u540D_u6355_u83B7"><a href="#u547D_u540D_u6355_u83B7" class="headerlink" title="命名捕获"></a>命名捕获</h3><figure class="highlight fortran"><table><tr><td class="code"><pre><span class="line">(?&lt;<span class="keyword">name</span>&gt;<span class="built_in">exp</span>)\k&lt;<span class="keyword">name</span>&gt;</span><br></pre></td></tr></table></figure>
<p>也可以写成(?’name’exp)\k’name’   与上1类似，将捕获的文本保存在组name中。name可以自己命名。</p>
<p>而组的作用是什么呢？php中的正则匹配<code>preg_match_all</code>方法示例:</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">echo <span class="string">'&lt;pre&gt;'</span>;</span><br><span class="line"><span class="regexp">//</span>文本</span><br><span class="line"><span class="variable">$str</span> = <span class="string">'yes, that is ok!'</span>;                            </span><br><span class="line"><span class="regexp">//</span>正则表达式   如果匹配到ok,则分配到anser组中</span><br><span class="line"><span class="variable">$regEx</span> = <span class="string">'#(?&lt;anser&gt;ok).*\k&lt;anser&gt;#'</span>;</span><br><span class="line"><span class="variable">$count</span> = preg_match_all(<span class="variable">$regEx</span>, <span class="variable">$str</span>, <span class="variable">$match</span>);       </span><br><span class="line"><span class="regexp">//</span>匹配成功次数</span><br><span class="line">var_dump(<span class="variable">$count</span>);<span class="regexp">//</span><span class="number">1</span>                 </span><br><span class="line"><span class="regexp">//</span>匹配结果集: array(<span class="string">'0'</span>=&gt;<span class="string">'ok!'</span>,<span class="string">'anser'</span>=&gt;<span class="string">'ok'</span>,<span class="string">'1'</span>=&gt;<span class="string">'ok'</span>)</span><br><span class="line">var_dump(<span class="variable">$match</span>);                       </span><br><span class="line"><span class="regexp">//</span>匹配结果集中的anser组</span><br><span class="line">var_dump(<span class="variable">$match</span>[<span class="string">'anser'</span>]);  <span class="regexp">//</span><span class="string">'ok'</span></span><br></pre></td></tr></table></figure>
<p>从结果看到，组的作用是将结果分到设定的组名中，方便取数据，匹配成功的次数是1次，而且文本组有2个，一个是默认的1，一个是设置的anser.</p>
<p>组的作用还可以引用在替换式中，用php中的正则替换<code>preg_replace</code>示例：</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="variable">$regEx</span> = <span class="string">'#.*([\w]&#123;3,&#125;\.[\w]+\.[\w]&#123;2,3&#125;)#'</span>;</span><br><span class="line"><span class="variable">$str</span> = <span class="string">'link = www.example.com'</span>;</span><br><span class="line"><span class="regexp">//</span>将<span class="variable">$str</span>的内容替换成<span class="string">"&lt;a href='\\1'&gt;"</span>,\\<span class="number">1</span>则代表正则中的分组<span class="number">1</span></span><br><span class="line"><span class="variable">$urlTag</span> = preg_replace(<span class="variable">$regEx</span>, <span class="string">"&lt;a href='\\1'&gt;"</span>, <span class="variable">$str</span>);  </span><br><span class="line">var_dump(<span class="variable">$urlTag</span>);</span><br><span class="line"><span class="regexp">//</span>结果 ：string <span class="string">'&lt;a href='</span>www.example.com<span class="string">'&gt;'</span> (length=<span class="number">26</span>)</span><br></pre></td></tr></table></figure>
<p>在这里注意的是双引号””中的引用需要多加一个\则组1变成\1，而单引号’’号中则还是\1。</p>
<h3 id="u4E0D_u5206_u7EC4_u4E0D_u5F15_u7528_u5F0F_u62EC_u53F7"><a href="#u4E0D_u5206_u7EC4_u4E0D_u5F15_u7528_u5F0F_u62EC_u53F7" class="headerlink" title="不分组不引用式括号"></a>不分组不引用式括号</h3><ul>
<li><code>(?:exp)</code>   有些表达式只是需要括号将内容括起来当一个小整体，这时用这种方法括起来就不会产生分组和引用，减少资源的浪费。</li>
</ul>
<h3 id="u96F6_u5BBD_u65AD_u8A00"><a href="#u96F6_u5BBD_u65AD_u8A00" class="headerlink" title="零宽断言"></a>零宽断言</h3><ul>
<li><p><code>(?=exp)</code>     匹配exp表达式前面的内容，即以exp结尾的内容但又不包括exp。</p>
</li>
<li><p><code>(?&lt;=exp)</code>    匹配exp表达式后面的内容，即以exp开始的内容但又不包括exp。</p>
</li>
</ul>
<h3 id="u8D1F_u5411_u96F6_u5BBD_u65AD_u8A00"><a href="#u8D1F_u5411_u96F6_u5BBD_u65AD_u8A00" class="headerlink" title="负向零宽断言"></a>负向零宽断言</h3><ul>
<li><p><code>(?!exp)</code>     匹配不是以exp结尾的内容。</p>
</li>
<li><p><code>(?&lt;!exp)</code>    匹配不是以exp开始的内容。</p>
</li>
</ul>
<h3 id="u6CE8_u91CA"><a href="#u6CE8_u91CA" class="headerlink" title="注释"></a>注释</h3><ul>
<li><code>(?#comment)</code> 括号中的comment对表达式并无影响，只是注释作用。</li>
</ul>
<h2 id="u5904_u7406_u9009_u9879"><a href="#u5904_u7406_u9009_u9879" class="headerlink" title="处理选项"></a>处理选项</h2><ul>
<li><p><code>i</code>    匹配时不区分字母大小写。 如’/text/i’    能匹配到TeXt</p>
</li>
<li><p><code>m</code>    多行模式  更改^和$的含义， 使它们分别在任意一行的行首和行尾匹配，而不仅仅在字符串的开关和结尾匹配，在此状态下$的含义是匹配\n之前的位置及字符串结束前的位置 。<br>如  ： 用 <code>#\w$#m</code>匹配文本 “abc\nabc\n”的匹配结果：c, c .(2次换行前的c都匹配到)。不加m,结果c </p>
</li>
<li><p><code>s</code>    单行模式.  更改’.’的含义，使它与每个字符依次匹配，包括换行符\n（.本来是匹配除换行符以外的文本）</p>
</li>
</ul>
<h2 id="u6CE8_u610F"><a href="#u6CE8_u610F" class="headerlink" title="注意"></a>注意</h2><ul>
<li><p>正则表达式中有特殊字符：( )[ ] \ ^ $ . ? + * | 想匹配这些字符的本体，需要加上\来换码。</p>
</li>
<li><p>正则表达式用单引号与双引号括时有些细节会有差别，双引号括时，引用分组如\1得写成\1，而单引号则是\1。</p>
</li>
<li><p>字符串中有\n\r\t等特殊字符时，字符串最外层需用双引号，而不是单引号。</p>
</li>
<li><p>匹配次数的重叠需谨慎，如`#([\w]{3}){4,6}#  所代表的是匹配12到18次的\w</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.jcsama.com/2014/09/25/php/php-filePath/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jceee">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="This way up">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/09/25/php/php-filePath/" itemprop="url">PHP文件操作part1[文件路径]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-09-25T22:07:00+08:00">
                2014-09-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/php/" itemprop="url" rel="index">
                    <span itemprop="name">php</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="u7EDD_u5BF9_u8DEF_u5F84_u4E0E_u76F8_u5BF9_u8DEF_u5F84"><a href="#u7EDD_u5BF9_u8DEF_u5F84_u4E0E_u76F8_u5BF9_u8DEF_u5F84" class="headerlink" title="绝对路径与相对路径"></a>绝对路径与相对路径</h1><blockquote>
<p>文件函数最常用的参数是什么？路径。<br>而路径参数大致分两种：绝对路径和相对路径。</p>
</blockquote>
<h2 id="u7EDD_u5BF9_u8DEF_u5F84__3A__u4ECE_u76D8_u5F00_u59CB_u7684_u8DEF_u5F84"><a href="#u7EDD_u5BF9_u8DEF_u5F84__3A__u4ECE_u76D8_u5F00_u59CB_u7684_u8DEF_u5F84" class="headerlink" title="绝对路径 : 从盘开始的路径"></a>绝对路径 : 从盘开始的路径</h2><p>example:</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">/Users/</span>jceee<span class="regexp">/code/</span>app<span class="regexp">/www/i</span>ndex.php（app项目中的index.php文件）</span><br></pre></td></tr></table></figure>
<h2 id="u76F8_u5BF9_u8DEF_u5F84__3A__u4EE5_u5F53_u524D_u6587_u4EF6_u4E3A_u57FA_u51C6_u6240_u7EC4_u6210_u7684_u8DEF_u5F84"><a href="#u76F8_u5BF9_u8DEF_u5F84__3A__u4EE5_u5F53_u524D_u6587_u4EF6_u4E3A_u57FA_u51C6_u6240_u7EC4_u6210_u7684_u8DEF_u5F84" class="headerlink" title="相对路径 : 以当前文件为基准所组成的路径"></a>相对路径 : 以当前文件为基准所组成的路径</h2><p>example:</p>
<figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line">./<span class="keyword">index</span>.php(相对当前目录)</span><br><span class="line">../<span class="keyword">index</span>.php(相对上级目录)</span><br></pre></td></tr></table></figure>
<h2 id="u83B7_u53D6_u7EDD_u5BF9_u8DEF_u5F84"><a href="#u83B7_u53D6_u7EDD_u5BF9_u8DEF_u5F84" class="headerlink" title="获取绝对路径"></a>获取绝对路径</h2><h3 id="realpath"><a href="#realpath" class="headerlink" title="realpath"></a>realpath</h3><p>php中有通过相对路径获得绝对路径的方法<code>realpath($path)</code></p>
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line">var_dump(<span class="name">realpath</span>('index.php'))<span class="comment">;</span></span><br><span class="line">//<span class="string">"/Users/jceee/code/app/www/index.php"</span></span><br></pre></td></tr></table></figure>
<h3 id="Magic_constants_3A___FILE"><a href="#Magic_constants_3A___FILE" class="headerlink" title="Magic constants: __FILE__"></a>Magic constants: <code>__FILE__</code></h3><p><code>__FILE__</code>可以获得当前文件的绝对路径</p>
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line">var_dump(<span class="name">__FILE__</span>)<span class="comment">;</span></span><br><span class="line">//<span class="string">"/Users/jceee/code/app/www/index.php"</span></span><br></pre></td></tr></table></figure>
<h3 id="dirname"><a href="#dirname" class="headerlink" title="dirname"></a>dirname</h3><p><code>dirname(path)</code>获取的是传入路径所在的目录,传入相对路径返回的也会是相对路径</p>
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line">var_dump(<span class="name">dirname</span>('./index.php'))<span class="comment">;</span></span><br><span class="line">//<span class="string">"."</span></span><br><span class="line">var_dump(<span class="name">dirname</span>(<span class="name">realpath</span>('./index.php')))<span class="comment">;</span></span><br><span class="line">//<span class="string">"/Users/jceee/code/app/www/"</span></span><br></pre></td></tr></table></figure>
<h3 id="getcwd_28_29"><a href="#getcwd_28_29" class="headerlink" title="getcwd()"></a>getcwd()</h3><p><code>getcwd</code>获取的是当前的工作目录,也就是index.php所在的目录。相当于<code>dirname(__FILE__)</code></p>
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line">var_dump(<span class="name">getcwd</span>())<span class="comment">;</span></span><br><span class="line">//<span class="string">"/Users/jceee/code/app/www/"</span></span><br></pre></td></tr></table></figure>
<h3 id="24_SERVER_5B_26_2339_3BDOCUMENT_ROOT_26_2339_3B_5D"><a href="#24_SERVER_5B_26_2339_3BDOCUMENT_ROOT_26_2339_3B_5D" class="headerlink" title="$_SERVER[&#39;DOCUMENT_ROOT&#39;]"></a><code>$_SERVER[&#39;DOCUMENT_ROOT&#39;]</code></h3><p><code>$_SERVER[&#39;DOCUMENT_ROOT&#39;]</code> 获取的是项目在服务器定义的根目录</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">var_dump(<span class="variable">$_SERVER</span>[<span class="string">'DOCUMENT_ROOT'</span>]);</span><br><span class="line"><span class="regexp">//</span><span class="string">"/Users/jceee/code/app"</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.jcsama.com/2014/09/14/mysql/mysql-insertMoreThanOne/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jceee">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="This way up">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/09/14/mysql/mysql-insertMoreThanOne/" itemprop="url">多条insert语句合并</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-09-14T22:37:00+08:00">
                2014-09-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/mysql/" itemprop="url" rel="index">
                    <span itemprop="name">mysql</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>表a君Article内容如下：</p>
<table>
<thead>
<tr>
<th>key</th>
<th>value</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
</tr>
<tr>
<td>title</td>
<td>strit</td>
</tr>
</tbody>
</table>
<p>现在，我们有一批数据需要插入表A,那么来了，按照我们普通的方式，排队1条1条来：</p>
<figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="symbol">`Article`</span>(<span class="symbol">`name`</span>,<span class="symbol">`title`</span>)<span class="keyword">VALUES</span> (<span class="string">'name1'</span>,<span class="string">'title1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="symbol">`Article`</span>(<span class="symbol">`name`</span>,<span class="symbol">`title`</span>)<span class="keyword">VALUES</span> (<span class="string">'name2'</span>,<span class="string">'title2'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="symbol">`Article`</span>(<span class="symbol">`name`</span>,<span class="symbol">`title`</span>)<span class="keyword">VALUES</span> (<span class="string">'name3'</span>,<span class="string">'title3'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="symbol">`Article`</span>(<span class="symbol">`name`</span>,<span class="symbol">`title`</span>)<span class="keyword">VALUES</span> (<span class="string">'name4'</span>,<span class="string">'title4'</span>);</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>之后发现了sql的insert语句可以含多个参数:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`Article`</span>(<span class="string">`name`</span>,<span class="string">`title`</span>)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'name1'</span>,<span class="string">'title1'</span>),</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'name2'</span>,<span class="string">'title2'</span>),</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'name3'</span>,<span class="string">'title3'</span>),</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'name4'</span>,<span class="string">'title4'</span>),</span><br><span class="line">...;</span><br></pre></td></tr></table></figure>
<p>这样一变，我们的多条语句变成了一个，好处是调用mysql的api次数减少了，开销降低，提高了性能和速度。</p>
<p>所以，在多条语句插入同个表时，我们尽量地用一条语句插入，提高性能，速度。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">jceee</p>
              <p class="site-description motion-element" itemprop="description">be better</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">47</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">22</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jceee</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
